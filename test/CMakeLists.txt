function(
	ADD_MIZUIRO_TEST
	PATHNAME
)
	STRING(REGEX REPLACE "\\/" "_" TESTNAME ${PATHNAME})

	SET(MIZUIRO_TEST_NAME test_${TESTNAME})

	ADD_EXECUTABLE (${MIZUIRO_TEST_NAME} ${PATHNAME}.cpp)

	IF(Boost_USE_STATIC_LIBS)
		SET_PROPERTY(
			TARGET ${MIZUIRO_TEST_NAME}
			PROPERTY COMPILE_FLAGS
			"-DBOOST_TEST_NO_LIB -DBOOST_TEST_MODULE=${TESTNAME}"
		)
	ELSE()
		SET_PROPERTY(
			TARGET ${MIZUIRO_TEST_NAME}
			PROPERTY COMPILE_FLAGS
			"-DBOOST_TEST_DYN_LINK -DBOOST_TEST_MODULE=${TESTNAME}"
		)
	ENDIF()

	TARGET_LINK_LIBRARIES (
		${MIZUIRO_TEST_NAME}
		${MIZUIRO_DEFAULT_LINK_TARGET}
		${Boost_UNIT_TEST_FRAMEWORK_LIBRARY}
	)

	ADD_TEST(
		NAME
		${MIZUIRO_TEST_NAME}
		COMMAND
		${MIZUIRO_TEST_NAME}
	)
endfunction()

ADD_MIZUIRO_TEST(convert/swizzle)
ADD_MIZUIRO_TEST(data)
ADD_MIZUIRO_TEST(empty_view)
ADD_MIZUIRO_TEST(heterogenous)
ADD_MIZUIRO_TEST(iterator_position)
ADD_MIZUIRO_TEST(views_are_compatible)
